import{d as O,c as w,w as l,u as t,I as V,a as o,N as g,Q as m,R as x,a2 as H,O as N,f as _,M as P,b as u,a3 as v,r as c,a4 as I,g as f,a5 as b,e as S,h as U,o as A}from"./index-tkx4F_lx.js";import{d as n}from"./dayjs.min-CxMP4GVf.js";import{u as R,o as p,k as W,h as $,d as j,_ as z}from"./_plugin-vue_export-helper-Pf0k0Y2W.js";const L={class:"ion-padding"},Q={class:"ion-margin-bottom"},q={class:"ion-margin-top"},E={class:"ion-margin-bottom"},F={class:"ion-margin-top"},G={class:"ion-margin-bottom"},J=O({__name:"AddTodoPage",setup(K){const k=U(),D=R(),a=c({id:"",date:"",time:"",content:"",check:!1}),s=c(""),i=c(""),h=async()=>{const r="".concat(a.value.date).concat(a.value.time),e=n(r).valueOf().toString(),d=D.uid;if(!d){p("請先登入","danger");return}try{await W($(j,"todoList",d,a.value.date,e),{id:e,date:a.value.date,time:a.value.time,content:a.value.content,iso8601:a.value.iso8601,check:!1}),p("新增成功","success")}catch(B){p(B,"danger")}finally{a.value={id:"",date:"",time:"",content:"",check:!1}}},C=()=>{s.value?s.value=n(s.value).format():s.value=n(new Date).format(),a.value.iso8601=s.value,a.value.date=n(s.value).format("YYYY-MM-DD")},T=()=>{i.value?i.value=n(i.value).format():i.value=n(new Date).format(),a.value.iso8601=i.value,a.value.time=n(i.value).format("HH:mm")},M=r=>{const e=r.detail.value;e&&(s.value=n(e).format(),a.value.iso8601=s.value,a.value.date=n(e).format("YYYY-MM-DD"))},Y=r=>{const e=r.detail.value;e&&(i.value=n(e).format(),a.value.iso8601=i.value,a.value.time=n(e).format("HH:mm"))},y=()=>{k.push({name:"home"})};return(r,e)=>(A(),w(t(V),null,{default:l(()=>[o(t(P),{class:"ion-no-border"},{default:l(()=>[o(t(g),null,{default:l(()=>[o(t(m),{slot:"start",class:"icon_area",onClick:y},{default:l(()=>[o(t(x),{class:"icon_area_img","aria-hidden":"true",size:"large",icon:t(H)},null,8,["icon"])]),_:1}),o(t(N),{class:"page_title"},{default:l(()=>[...e[3]||(e[3]=[_("新增項目",-1)])]),_:1}),o(t(m),{slot:"end",class:"icon_area"})]),_:1})]),_:1}),o(t(f),{fullscreen:!0},{default:l(()=>[u("div",L,[u("div",Q,[e[4]||(e[4]=u("div",{class:"input_title"},"日期",-1)),o(t(v),{value:a.value.date,"onUpdate:modelValue":e[0]||(e[0]=d=>a.value.date=d),"label-placement":"floating",fill:"outline",id:"open-date-modal"},null,8,["value"]),o(t(I),{trigger:"open-date-modal","initial-breakpoint":.5,"handle-behavior":"cycle",onWillPresent:C},{default:l(()=>[o(t(f),{class:"ion-padding"},{default:l(()=>[u("div",q,[o(t(b),{presentation:"date",value:s.value,onIonChange:M},null,8,["value"])])]),_:1})]),_:1})]),u("div",E,[e[5]||(e[5]=u("div",{class:"input_title"},"時間",-1)),o(t(v),{value:a.value.time,"onUpdate:modelValue":e[1]||(e[1]=d=>a.value.time=d),"label-placement":"floating",fill:"outline",id:"open-time-modal"},null,8,["value"]),o(t(I),{trigger:"open-time-modal","initial-breakpoint":.3,"handle-behavior":"cycle",onWillPresent:T},{default:l(()=>[o(t(f),{class:"ion-padding"},{default:l(()=>[u("div",F,[o(t(b),{presentation:"time",value:i.value,onIonChange:Y},null,8,["value"])])]),_:1})]),_:1})]),u("div",G,[e[6]||(e[6]=u("div",{class:"input_title"},"內容",-1)),o(t(v),{value:a.value.content,"onUpdate:modelValue":e[2]||(e[2]=d=>a.value.content=d),"label-placement":"floating",fill:"outline"},null,8,["value"])]),o(t(g),null,{default:l(()=>[o(t(m),{slot:"primary"},{default:l(()=>[o(t(S),{fill:"solid",onClick:h},{default:l(()=>[...e[7]||(e[7]=[_("新增",-1)])]),_:1})]),_:1})]),_:1})])]),_:1})]),_:1}))}}),ae=z(J,[["__scopeId","data-v-e65e7874"]]);export{ae as default};
