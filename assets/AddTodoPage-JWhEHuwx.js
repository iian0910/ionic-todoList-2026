import{d as C,j as S,b as r,a as t,u as a,a2 as g,r as v,a3 as T,w as i,g as b,a4 as M,N as h,Q as k,e as U,f as w,o as y,c as A,I as P,R as $,a5 as j,O as R,M as z,h as E}from"./index-DQMuVA7L.js";import{d as s}from"./dayjs.min-CxMP4GVf.js";import{_ as B,u as L,o as D,k as Q,h as q,d as F}from"./_plugin-vue_export-helper-DmGOIWjG.js";const G={class:"ion-padding"},J={class:"ion-margin-bottom"},K={class:"ion-margin-top"},W={class:"ion-margin-bottom"},X={class:"ion-margin-top"},Z={class:"ion-margin-bottom"},ee=C({__name:"InfoInput",emits:["addTodo"],setup(Y,{emit:p}){const _=p,l=v(""),n=v(""),u=v(!1),d=v(!1),o=v({id:"",date:"",time:"",content:"",check:!1}),m=()=>{l.value?l.value=s(l.value).format():l.value=s(new Date).format(),o.value.iso8601=l.value,o.value.date=s(l.value).format("YYYY-MM-DD"),u.value=!0},I=()=>{u.value=!1,l.value?l.value=s(l.value).format():l.value=s(new Date).format()},O=()=>{n.value?n.value=s(n.value).format():n.value=s(new Date).format(),o.value.iso8601=n.value,o.value.time=s(n.value).format("HH:mm"),d.value=!0},x=()=>{d.value=!1,n.value?n.value=s(n.value).format():n.value=s(new Date).format()},V=f=>{const e=f.detail.value;e&&(l.value=s(e).format(),o.value.iso8601=l.value,o.value.date=s(e).format("YYYY-MM-DD"))},H=f=>{const e=f.detail.value;e&&(n.value=s(e).format(),o.value.iso8601=n.value,o.value.time=s(e).format("HH:mm"))},N=()=>{_("addTodo",o.value),o.value={id:"",date:"",time:"",content:"",check:!1}};return(f,e)=>(y(),S("div",G,[r("div",J,[e[3]||(e[3]=r("div",{class:"input_title"},"日期",-1)),t(a(g),{value:o.value.date,"onUpdate:modelValue":e[0]||(e[0]=c=>o.value.date=c),"label-placement":"floating",fill:"outline",readonly:"",onClick:m},null,8,["value"]),t(a(T),{"is-open":u.value,"initial-breakpoint":.5,"handle-behavior":"cycle",onIonModalDidDismiss:I},{default:i(()=>[t(a(b),{class:"ion-padding"},{default:i(()=>[r("div",K,[t(a(M),{presentation:"date",value:l.value,onIonChange:V},null,8,["value"])])]),_:1})]),_:1},8,["is-open"])]),r("div",W,[e[4]||(e[4]=r("div",{class:"input_title"},"時間",-1)),t(a(g),{value:o.value.time,"onUpdate:modelValue":e[1]||(e[1]=c=>o.value.time=c),"label-placement":"floating",fill:"outline",readonly:"",onClick:O},null,8,["value"]),t(a(T),{"is-open":d.value,"initial-breakpoint":.3,"handle-behavior":"cycle",onIonModalDidDismiss:x},{default:i(()=>[t(a(b),{class:"ion-padding"},{default:i(()=>[r("div",X,[t(a(M),{presentation:"time",value:n.value,onIonChange:H},null,8,["value"])])]),_:1})]),_:1},8,["is-open"])]),r("div",Z,[e[5]||(e[5]=r("div",{class:"input_title"},"內容",-1)),t(a(g),{value:o.value.content,"onUpdate:modelValue":e[2]||(e[2]=c=>o.value.content=c),"label-placement":"floating",fill:"outline"},null,8,["value"])]),t(a(h),null,{default:i(()=>[t(a(k),{slot:"primary"},{default:i(()=>[t(a(U),{fill:"solid",onClick:N},{default:i(()=>[...e[6]||(e[6]=[w("新增",-1)])]),_:1})]),_:1})]),_:1})]))}}),ae=B(ee,[["__scopeId","data-v-10b88d12"]]),te=C({__name:"AddTodoPage",setup(Y){const p=L(),_=E(),l=async u=>{const d="".concat(u.date).concat(u.time),o=s(d).valueOf().toString(),m=p.uid;if(!m){D("請先登入","danger");return}try{await Q(q(F,"todoList",m,u.date,o),{id:o,date:u.date,time:u.time,content:u.content,iso8601:u.iso8601,check:!1}),D("新增成功","success")}catch(I){D(I,"danger")}},n=()=>{_.push({name:"home"})};return(u,d)=>(y(),A(a(P),null,{default:i(()=>[t(a(z),{class:"ion-no-border"},{default:i(()=>[t(a(h),null,{default:i(()=>[t(a(k),{slot:"start",class:"icon_area",onClick:n},{default:i(()=>[t(a($),{class:"icon_area_img","aria-hidden":"true",size:"large",icon:a(j)},null,8,["icon"])]),_:1}),t(a(R),{class:"page_title"},{default:i(()=>[...d[0]||(d[0]=[w("新增項目",-1)])]),_:1}),t(a(k),{slot:"end",class:"icon_area"})]),_:1})]),_:1}),t(a(b),{fullscreen:!0},{default:i(()=>[t(ae,{onAddTodo:l})]),_:1})]),_:1}))}}),se=B(te,[["__scopeId","data-v-f988bd60"]]);export{se as default};
