import{d as y,O as x,a3 as D,r as m,c as B,w as i,u as a,I as C,a as r,P as N,Q as v,h as b,a2 as E,e as P,f as S,T as L,i as O,j as R,o as V}from"./index-C1xXF2OV.js";import{d as j}from"./dayjs.min-CxMP4GVf.js";import{u as U,o as c,h as _,d as p,l as $,k as q,f as z,_ as H}from"./_plugin-vue_export-helper-B9xEqKrl.js";import{I as Q}from"./InfoInput-BJcTs40T.js";const W=y({__name:"EditTodoPage",setup(A){const T=R(),g=D(),u=U(),d=m({id:"",date:"",time:"",content:"",check:!1}),l=m(""),f=m(""),h=async(e,t)=>{const o=u.uid;if(!o){c("請先登入","danger");return}try{const s=_(p,"todoList",o,e,t),n=await $(s);n.exists()?(d.value.id=n.data().id,d.value.date=n.data().date,d.value.time=n.data().time,d.value.content=n.data().content,d.value.iso8601=n.data().iso8601):c("資料不存在","danger")}catch(s){c(s,"danger")}},k=async(e,t)=>{const o=u.uid;if(!o){c("請先登入","danger");return}try{await z(_(p,"todoList",o,e,t))}catch(s){console.error("Error getting documents:",s)}},w=async e=>{const t="".concat(e.date).concat(e.time),o=j(t).valueOf().toString(),s=u.uid;if(!s){c("請先登入","danger");return}await k(l.value,f.value);try{await q(_(p,"todoList",s,e.date,o),{id:o,date:e.date,time:e.time,content:e.content,iso8601:e.iso8601,check:!1}),c("新增成功","success"),I()}catch(n){c(n,"danger")}},I=()=>{T.push({name:"home"})};return x(()=>{l.value=g.query.date,f.value=g.params.id,h(l.value,f.value)}),(e,t)=>(V(),B(a(C),null,{default:i(()=>[r(a(L),{class:"ion-no-border"},{default:i(()=>[r(a(N),null,{default:i(()=>[r(a(v),{slot:"start",class:"icon_area",onClick:I},{default:i(()=>[r(a(b),{class:"icon_area_img","aria-hidden":"true",size:"large",icon:a(E)},null,8,["icon"])]),_:1}),r(a(P),{class:"page_title"},{default:i(()=>[...t[0]||(t[0]=[S("編輯項目",-1)])]),_:1}),r(a(v),{slot:"end",class:"icon_area"})]),_:1})]),_:1}),r(a(O),{fullscreen:!0},{default:i(()=>[r(Q,{onUpdateTodo:w,"edit-todo":d.value},null,8,["edit-todo"])]),_:1})]),_:1}))}}),M=H(W,[["__scopeId","data-v-aff345f0"]]);export{M as default};
