import{d as y,O as x,m as D,r as m,c as B,w as i,u as t,I as C,a as r,P as N,Q as v,e as b,a3 as E,R as P,j as R,U as S,f as L,g as O,o as U}from"./index-ClO9UN7A.js";import{d as V}from"./dayjs.min-CxMP4GVf.js";import{u as j,o as c,h as p,d as _,l as $,k as q,f as z}from"./index-BT5Xvqpe.js";import{I as H}from"./InfoInput-CpK_QV4b.js";import{_ as Q}from"./_plugin-vue_export-helper-DlAUqK2U.js";const W=y({__name:"EditTodoPage",setup(A){const T=O(),g=D(),u=j(),d=m({id:"",date:"",time:"",content:"",check:!1}),l=m(""),f=m(""),h=async(e,a)=>{const o=u.uid;if(!o){c("請先登入","danger");return}try{const s=p(_,"todoList",o,e,a),n=await $(s);n.exists()?(d.value.id=n.data().id,d.value.date=n.data().date,d.value.time=n.data().time,d.value.content=n.data().content,d.value.iso8601=n.data().iso8601):c("資料不存在","danger")}catch(s){c(s,"danger")}},k=async(e,a)=>{const o=u.uid;if(!o){c("請先登入","danger");return}try{await z(p(_,"todoList",o,e,a))}catch(s){console.error("Error getting documents:",s)}},w=async e=>{const a="".concat(e.date).concat(e.time),o=V(a).valueOf().toString(),s=u.uid;if(!s){c("請先登入","danger");return}await k(l.value,f.value);try{await q(p(_,"todoList",s,e.date,o),{id:o,date:e.date,time:e.time,content:e.content,iso8601:e.iso8601,check:!1}),c("新增成功","success"),I()}catch(n){c(n,"danger")}},I=()=>{T.push({name:"home"})};return x(()=>{l.value=g.query.date,f.value=g.params.id,h(l.value,f.value)}),(e,a)=>(U(),B(t(C),null,{default:i(()=>[r(t(S),{class:"ion-no-border"},{default:i(()=>[r(t(N),null,{default:i(()=>[r(t(v),{slot:"start",class:"icon_area",onClick:I},{default:i(()=>[r(t(b),{class:"icon_area_img","aria-hidden":"true",size:"large",icon:t(E)},null,8,["icon"])]),_:1}),r(t(P),{class:"page_title"},{default:i(()=>[...a[0]||(a[0]=[R("編輯項目",-1)])]),_:1}),r(t(v),{slot:"end",class:"icon_area"})]),_:1})]),_:1}),r(t(L),{fullscreen:!0},{default:i(()=>[r(H,{onUpdateTodo:w,"edit-todo":d.value},null,8,["edit-todo"])]),_:1})]),_:1}))}}),X=Q(W,[["__scopeId","data-v-aff345f0"]]);export{X as default};
