import{d as y,u as D,A as b,v as x,r as m,c as N,w as i,a,I as B,o as c,Z as p,D as _,a2 as C,b as r,H as E,J as v,f as S,a0 as L,K as P,p as R,N as V,g as j,a1 as H,j as O,Y as U,k as $,_ as q}from"./index-TM_tSvUV.js";import{d as z}from"./dayjs.min-CxMP4GVf.js";import{I as A}from"./InfoInput-UTm2CNVY.js";const J=y({__name:"EditTodoPage",setup(K){const T=O(),g=x(),u=D(),d=m({id:"",date:"",time:"",content:"",check:!1}),l=m(""),f=m(""),h=async(e,t)=>{const o=u.uid;if(!o){c("請先登入","danger");return}try{const s=p(_,"todoList",o,e,t),n=await C(s);n.exists()?(d.value.id=n.data().id,d.value.date=n.data().date,d.value.time=n.data().time,d.value.content=n.data().content,d.value.iso8601=n.data().iso8601):c("資料不存在","danger")}catch(s){c(s,"danger")}},k=async(e,t)=>{const o=u.uid;if(!o){c("請先登入","danger");return}try{await U(p(_,"todoList",o,e,t))}catch(s){console.error("Error getting documents:",s)}},w=async e=>{const t="".concat(e.date).concat(e.time),o=z(t).valueOf().toString(),s=u.uid;if(!s){c("請先登入","danger");return}await k(l.value,f.value);try{await H(p(_,"todoList",s,e.date,o),{id:o,date:e.date,time:e.time,content:e.content,iso8601:e.iso8601,check:!1}),c("新增成功","success"),I()}catch(n){c(n,"danger")}},I=()=>{T.push({name:"home"})};return b(()=>{l.value=g.query.date,f.value=g.params.id,h(l.value,f.value)}),(e,t)=>($(),N(a(B),null,{default:i(()=>[r(a(V),{class:"ion-no-border"},{default:i(()=>[r(a(E),{class:"ion-toolbar"},{default:i(()=>[r(a(v),{slot:"start",class:"icon_area",onClick:I},{default:i(()=>[r(a(S),{class:"icon_area_img","aria-hidden":"true",size:"large",icon:a(L)},null,8,["icon"])]),_:1}),r(a(P),{class:"page_title"},{default:i(()=>[...t[0]||(t[0]=[R("編輯項目",-1)])]),_:1}),r(a(v),{slot:"end",class:"icon_area"})]),_:1})]),_:1}),r(a(j),{fullscreen:!0,class:"page-content"},{default:i(()=>[r(A,{onUpdateTodo:w,"edit-todo":d.value},null,8,["edit-todo"])]),_:1})]),_:1}))}}),F=q(J,[["__scopeId","data-v-caa456da"]]);export{F as default};
