import{d as y,u as b,T as x,v as D,r as m,c as B,w as i,a,I as C,o as c,ae as p,W as _,ai as N,b as r,Y as E,Z as v,f as S,ag as L,$ as P,p as R,a2 as V,g as $,ah as j,j as O,ad as U,k as W,_ as q}from"./index-Bl3qa_Sd.js";import{d as z}from"./dayjs.min-CxMP4GVf.js";import{I as H}from"./InfoInput-BjG36GYW.js";const Y=y({__name:"EditTodoPage",setup(Z){const T=O(),g=D(),u=b(),d=m({id:"",date:"",time:"",content:"",check:!1}),l=m(""),f=m(""),h=async(e,t)=>{const o=u.uid;if(!o){c("請先登入","danger");return}try{const s=p(_,"todoList",o,e,t),n=await N(s);n.exists()?(d.value.id=n.data().id,d.value.date=n.data().date,d.value.time=n.data().time,d.value.content=n.data().content,d.value.iso8601=n.data().iso8601):c("資料不存在","danger")}catch(s){c(s,"danger")}},k=async(e,t)=>{const o=u.uid;if(!o){c("請先登入","danger");return}try{await U(p(_,"todoList",o,e,t))}catch(s){console.error("Error getting documents:",s)}},w=async e=>{const t="".concat(e.date).concat(e.time),o=z(t).valueOf().toString(),s=u.uid;if(!s){c("請先登入","danger");return}await k(l.value,f.value);try{await j(p(_,"todoList",s,e.date,o),{id:o,date:e.date,time:e.time,content:e.content,iso8601:e.iso8601,check:!1}),c("新增成功","success"),I()}catch(n){c(n,"danger")}},I=()=>{T.push({name:"home"})};return x(()=>{l.value=g.query.date,f.value=g.params.id,h(l.value,f.value)}),(e,t)=>(W(),B(a(C),null,{default:i(()=>[r(a(V),{class:"ion-no-border"},{default:i(()=>[r(a(E),{class:"ion-toolbar"},{default:i(()=>[r(a(v),{slot:"start",class:"icon_area",onClick:I},{default:i(()=>[r(a(S),{class:"icon_area_img","aria-hidden":"true",size:"large",icon:a(L)},null,8,["icon"])]),_:1}),r(a(P),{class:"page_title"},{default:i(()=>[...t[0]||(t[0]=[R("編輯項目",-1)])]),_:1}),r(a(v),{slot:"end",class:"icon_area"})]),_:1})]),_:1}),r(a($),{fullscreen:!0,class:"page-content"},{default:i(()=>[r(H,{onUpdateTodo:w,"edit-todo":d.value},null,8,["edit-todo"])]),_:1})]),_:1}))}}),J=q(Y,[["__scopeId","data-v-caa456da"]]);export{J as default};
