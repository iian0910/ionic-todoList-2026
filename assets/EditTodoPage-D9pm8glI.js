import{d as y,L as x,a3 as D,r as m,c as N,w as i,u as a,I as B,a as r,N as C,Q as v,R as b,a2 as E,O as L,f as R,M as S,g as O,h as P,o as V}from"./index-BjSP4vXz.js";import{d as U}from"./dayjs.min-CxMP4GVf.js";import{u as $,o as c,h as _,d as p,l as j,k as q,f as z,_ as H}from"./_plugin-vue_export-helper-Bhnf57Ro.js";import{I as M}from"./InfoInput-BV68Rv-7.js";const Q=y({__name:"EditTodoPage",setup(W){const h=P(),g=D(),u=$(),d=m({id:"",date:"",time:"",content:"",check:!1}),l=m(""),f=m(""),T=async(e,t)=>{const o=u.uid;if(!o){c("請先登入","danger");return}try{const s=_(p,"todoList",o,e,t),n=await j(s);n.exists()?(d.value.id=n.data().id,d.value.date=n.data().date,d.value.time=n.data().time,d.value.content=n.data().content,d.value.iso8601=n.data().iso8601):c("資料不存在","danger")}catch(s){c(s,"danger")}},k=async(e,t)=>{const o=u.uid;if(!o){c("請先登入","danger");return}try{await z(_(p,"todoList",o,e,t))}catch(s){console.error("Error getting documents:",s)}},w=async e=>{const t="".concat(e.date).concat(e.time),o=U(t).valueOf().toString(),s=u.uid;if(!s){c("請先登入","danger");return}await k(l.value,f.value);try{await q(_(p,"todoList",s,e.date,o),{id:o,date:e.date,time:e.time,content:e.content,iso8601:e.iso8601,check:!1}),c("新增成功","success"),I()}catch(n){c(n,"danger")}},I=()=>{h.push({name:"home"})};return x(()=>{l.value=g.query.date,f.value=g.params.id,T(l.value,f.value)}),(e,t)=>(V(),N(a(B),null,{default:i(()=>[r(a(S),{class:"ion-no-border"},{default:i(()=>[r(a(C),null,{default:i(()=>[r(a(v),{slot:"start",class:"icon_area",onClick:I},{default:i(()=>[r(a(b),{class:"icon_area_img","aria-hidden":"true",size:"large",icon:a(E)},null,8,["icon"])]),_:1}),r(a(L),{class:"page_title"},{default:i(()=>[...t[0]||(t[0]=[R("編輯項目",-1)])]),_:1}),r(a(v),{slot:"end",class:"icon_area"})]),_:1})]),_:1}),r(a(O),{fullscreen:!0},{default:i(()=>[r(M,{onUpdateTodo:w,"edit-todo":d.value},null,8,["edit-todo"])]),_:1})]),_:1}))}}),K=H(Q,[["__scopeId","data-v-aff345f0"]]);export{K as default};
