import{d as q,u as B,A as C,v as D,r as l,c as x,w as c,a,I as L,o as r,G as g,H as v,C as h,B as y,D as p,b as o,K as N,L as k,f as P,a2 as E,M as S,p as V,P as H,g as R,a1 as U,a0 as j,j as z,k as A,_ as G}from"./index-Dq5IbgG3.js";import{I as K}from"./InfoInput-JiRounjl.js";import"./dayjs.min-CxMP4GVf.js";const M=q({__name:"EditTodoPage",setup(O){const b=z(),f=D(),_=B(),s=l({id:"",date:"",time:"",content:"",check:!1}),m=l(""),u=l(""),w=async(i,e)=>{const n=_.uid;if(!n){r("請先登入","danger");return}const d=g(h(p,"todoList",n,"todos"),v("id","==",e));try{const t=await y(d);t.empty?r("資料不存在","danger"):(s.value.id=t.docs[0].data().id,s.value.date=t.docs[0].data().date,s.value.time=t.docs[0].data().time,s.value.content=t.docs[0].data().content,s.value.check=t.docs[0].data().check)}catch(t){r(t,"danger")}},T=async i=>{const e=_.uid;if(!e){r("請先登入","danger");return}try{const n=g(h(p,"todoList",e,"todos"),v("id","==",u.value)),d=await y(n);d.empty||await U(j(p,"todoList",e,"todos",d.docs[0].id),{...i}),r("新增成功","success"),I()}catch(n){r(n,"danger")}},I=()=>{b.push({name:"home"})};return C(()=>{m.value=f.query.date,u.value=f.params.id,w(m.value,u.value)}),(i,e)=>(A(),x(a(L),null,{default:c(()=>[o(a(H),{class:"ion-no-border"},{default:c(()=>[o(a(N),{class:"ion-toolbar"},{default:c(()=>[o(a(k),{slot:"start",class:"icon_area",onClick:I},{default:c(()=>[o(a(P),{class:"icon_area_img","aria-hidden":"true",size:"large",icon:a(E)},null,8,["icon"])]),_:1}),o(a(S),{class:"page_title"},{default:c(()=>[...e[0]||(e[0]=[V("編輯項目",-1)])]),_:1}),o(a(k),{slot:"end",class:"icon_area"})]),_:1})]),_:1}),o(a(R),{fullscreen:!0,class:"page-content"},{default:c(()=>[o(K,{onUpdateTodo:T,"edit-todo":s.value},null,8,["edit-todo"])]),_:1})]),_:1}))}}),Q=G(M,[["__scopeId","data-v-d83bab9e"]]);export{Q as default};
