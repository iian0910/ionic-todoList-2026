System.register(["./index-legacy-DiQ0gOmv.js","./dayjs.min-legacy-B_dXnH5K.js","./_plugin-vue_export-helper-legacy-lVylPXX-.js"],function(e,a){"use strict";var t,l,n,i,o,u,d,s,c,r,v,m,p,f,g,_,h,b,y,x,k,Y,w,C,M,j,D,H,I,L,$,E,P;return{setters:[e=>{t=e.d,l=e.L,n=e.a6,i=e.r,o=e.c,u=e.w,d=e.u,s=e.I,c=e.a,r=e.N,v=e.Q,m=e.R,p=e.a2,f=e.O,g=e.f,_=e.M,h=e.b,b=e.a3,y=e.a4,x=e.g,k=e.a5,Y=e.e,w=e.h,C=e.o},e=>{M=e.d},e=>{j=e.u,D=e.o,H=e.h,I=e.d,L=e.l,$=e.k,E=e.f,P=e._}],execute:function(){var a=document.createElement("style");a.textContent=".icon_area[data-v-e0b7c433]{width:48px;height:48px}.icon_area_img[data-v-e0b7c433]{padding:8px}.page_title[data-v-e0b7c433]{text-align:center}.input_title[data-v-e0b7c433]{font-size:18px}\n/*$vite$:1*/",document.head.appendChild(a);const U={class:"ion-padding"},V={class:"ion-margin-bottom"},z={class:"ion-margin-top"},O={class:"ion-margin-bottom"},S={class:"ion-margin-top"},W={class:"ion-margin-bottom"};e("default",P(t({__name:"EditTodoPage",setup(e){const a=w(),t=n(),P=j(),q=i({id:"",date:"",time:"",content:"",check:!1}),N=i(""),Q=i(""),R=i(""),T=i(""),A=async()=>{const e=`${q.value.date}${q.value.time}`,a=M(e).valueOf().toString(),t=P.uid;if(t){await(async(e,a)=>{const t=P.uid;if(t)try{await E(H(I,"todoList",t,e,a))}catch(l){console.error("Error getting documents:",l)}else D("請先登入","danger")})(R.value,T.value);try{await $(H(I,"todoList",t,q.value.date,a),{id:a,date:q.value.date,time:q.value.time,content:q.value.content,iso8601:q.value.iso8601,check:!1}),D("新增成功","success"),K()}catch(l){D(l,"danger")}}else D("請先登入","danger")},B=()=>{N.value?N.value=M(N.value).format():N.value=M(q.value.iso8601).format(),q.value.date=M(N.value).format("YYYY-MM-DD")},F=()=>{Q.value?Q.value=M(Q.value).format():Q.value=M(q.value.iso8601).format(),q.value.time=M(Q.value).format("HH:mm")},G=e=>{const a=e.detail.value;a&&(N.value=M(a).format(),q.value.date=M(a).format("YYYY-MM-DD"))},J=e=>{const a=e.detail.value;a&&(Q.value=M(a).format(),q.value.time=M(a).format("HH:mm"))},K=()=>{a.push({name:"home"})};return l(()=>{R.value=t.query.date,T.value=t.params.id,(async(e,a)=>{const t=P.uid;if(t)try{const l=H(I,"todoList",t,e,a),n=await L(l);n.exists()?(q.value.date=n.data().date,q.value.time=n.data().time,q.value.content=n.data().content,q.value.iso8601=n.data().iso8601):D("資料不存在","danger")}catch(l){D(l,"danger")}else D("請先登入","danger")})(R.value,T.value)}),(e,a)=>(C(),o(d(s),null,{default:u(()=>[c(d(_),{class:"ion-no-border"},{default:u(()=>[c(d(r),null,{default:u(()=>[c(d(v),{slot:"start",class:"icon_area",onClick:K},{default:u(()=>[c(d(m),{class:"icon_area_img","aria-hidden":"true",size:"large",icon:d(p)},null,8,["icon"])]),_:1}),c(d(f),{class:"page_title"},{default:u(()=>[...a[3]||(a[3]=[g("編輯項目",-1)])]),_:1}),c(d(v),{slot:"end",class:"icon_area"})]),_:1})]),_:1}),c(d(x),{fullscreen:!0},{default:u(()=>[h("div",U,[h("div",V,[a[4]||(a[4]=h("div",{class:"input_title"},"日期",-1)),c(d(b),{value:q.value.date,"onUpdate:modelValue":a[0]||(a[0]=e=>q.value.date=e),"label-placement":"floating",fill:"outline",id:"open-date-modal"},null,8,["value"]),c(d(y),{trigger:"open-date-modal","initial-breakpoint":.4,breakpoints:[.4],"handle-behavior":"cycle",onWillPresent:B},{default:u(()=>[c(d(x),{class:"ion-padding"},{default:u(()=>[h("div",z,[c(d(k),{presentation:"date",value:N.value,onIonChange:G},null,8,["value"])])]),_:1})]),_:1})]),h("div",O,[a[5]||(a[5]=h("div",{class:"input_title"},"時間",-1)),c(d(b),{value:q.value.time,"onUpdate:modelValue":a[1]||(a[1]=e=>q.value.time=e),"label-placement":"floating",fill:"outline",id:"open-time-modal"},null,8,["value"]),c(d(y),{trigger:"open-time-modal","initial-breakpoint":.3,breakpoints:[.3],"handle-behavior":"cycle",onWillPresent:F},{default:u(()=>[c(d(x),{class:"ion-padding"},{default:u(()=>[h("div",S,[c(d(k),{presentation:"time",value:Q.value,onIonChange:J},null,8,["value"])])]),_:1})]),_:1})]),h("div",W,[a[6]||(a[6]=h("div",{class:"input_title"},"內容",-1)),c(d(b),{value:q.value.content,"onUpdate:modelValue":a[2]||(a[2]=e=>q.value.content=e),"label-placement":"floating",fill:"outline"},null,8,["value"])]),c(d(r),null,{default:u(()=>[c(d(v),{slot:"primary"},{default:u(()=>[c(d(Y),{fill:"solid",onClick:A},{default:u(()=>[...a[7]||(a[7]=[g("更新",-1)])]),_:1})]),_:1})]),_:1})])]),_:1})]),_:1}))}}),[["__scopeId","data-v-e0b7c433"]]))}}});
