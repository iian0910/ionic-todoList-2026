System.register(["./index-legacy-6pe8m5Sa.js","./dayjs.min-legacy-B_dXnH5K.js","./vue-virtual-scroller.esm-legacy-DlB1WCxB.js"],function(e,t){"use strict";var a,n,i,o,d,l,r,s,c,f,p,u,v,m,g,x,h,y,b,k,w,_,D,Y,z,C,j,S,L,M,T,I,U,P,R,N,O,$,q,E,F,H,V,A,B,G,J,K,Q,W,X;return{setters:[e=>{a=e.d,n=e.x,i=e.r,o=e.m,d=e.e,l=e.F,r=e.y,s=e.k,c=e.z,f=e.t,p=e._,u=e.u,v=e.A,m=e.o,g=e.c,x=e.w,h=e.a,y=e.I,b=e.B,k=e.C,w=e.D,_=e.E,D=e.b,Y=e.G,z=e.H,C=e.J,j=e.K,S=e.p,L=e.f,M=e.L,T=e.M,I=e.N,U=e.O,P=e.P,R=e.Q,N=e.R,O=e.S,$=e.T,q=e.U,E=e.V,F=e.W,H=e.X,V=e.g,A=e.Y,B=e.Z,G=e.j,J=e.$,K=e.h},e=>{Q=e.d},e=>{W=e.s,X=e.a}],execute:function(){var t=document.createElement("style");t.textContent='@charset "UTF-8";.date-picker-container[data-v-7ef44356]{background:#fff;border-radius:20px;padding:30px 20px;box-shadow:0 20px 60px rgba(0,0,0,.3)}.header[data-v-7ef44356]{text-align:center;margin-bottom:30px}.header h2[data-v-7ef44356]{color:#333;font-size:24px;margin-bottom:10px}.selected-date[data-v-7ef44356]{color:#667eea;font-size:18px;font-weight:500}.picker-wrapper[data-v-7ef44356]{background:#f5ebe0;position:relative;overflow:hidden;padding:8px 6px}.nav-button[data-v-7ef44356]{position:absolute;top:50%;transform:translateY(-50%);width:40px;height:40px;border:none;background:#667eea;color:#fff;border-radius:50%;cursor:pointer;display:flex;align-items:center;justify-content:center;font-size:20px;transition:all .3s;z-index:10;box-shadow:0 4px 12px rgba(102,126,234,.3)}.nav-button[data-v-7ef44356]:hover{background:#764ba2;transform:translateY(-50%) scale(1.1)}.nav-button[data-v-7ef44356]:active{transform:translateY(-50%) scale(.95)}.nav-button.prev[data-v-7ef44356]{left:5px}.nav-button.next[data-v-7ef44356]{right:5px}.dates-container[data-v-7ef44356]{display:flex;gap:12px;overflow-x:auto;scroll-behavior:smooth;scrollbar-width:none;-ms-overflow-style:none;padding:10px 0}.dates-container[data-v-7ef44356]::-webkit-scrollbar{display:none}.date-item[data-v-7ef44356]{color:#333;min-width:70px;height:90px;display:flex;flex-direction:column;align-items:center;justify-content:center;border:2px solid #e0e0e0;border-radius:12px;cursor:pointer;transition:all .3s;background:#fff;flex-shrink:0}.date-item[data-v-7ef44356]:hover{border-color:#667eea;transform:translateY(-5px);box-shadow:0 8px 16px rgba(102,126,234,.2)}.date-item.selected[data-v-7ef44356]{background:linear-gradient(135deg,#667eea,#764ba2);border-color:#667eea;color:#fff;transform:translateY(-5px);box-shadow:0 8px 20px rgba(102,126,234,.4)}.date-item.today[data-v-7ef44356]{border-color:#ffa726;border-width:3px}.weekday[data-v-7ef44356]{font-size:12px;font-weight:500;margin-bottom:5px;opacity:.8}.day[data-v-7ef44356]{font-size:24px;font-weight:700;margin-bottom:3px}.month[data-v-7ef44356]{font-size:11px;opacity:.7}.date-item.selected .weekday[data-v-7ef44356],.date-item.selected .month[data-v-7ef44356]{opacity:1}.icon_area[data-v-df9e4f18]{width:48px;height:48px}.icon_area_img[data-v-df9e4f18]{padding:8px}.no_data[data-v-df9e4f18]{height:100%}.empty_status[data-v-df9e4f18]{width:250px;height:250px;margin:0 auto;color:#d7d7d7}.empty_title[data-v-df9e4f18]{font-size:24px;text-align:center}.card-wrapper[data-v-df9e4f18]{padding:2px 0}ion-avatar[data-v-df9e4f18]{width:48px;height:48px}.user-photo[data-v-df9e4f18]{width:48px;height:48px;display:block;margin:0 auto}\n/*$vite$:1*/',document.head.appendChild(t);const Z={class:"picker-wrapper"},ee=["onClick"],te={class:"weekday"},ae={class:"day"},ne={class:"month"},ie=p(a({__name:"DatePicker",emits:["selectedDate"],setup(e,{emit:t}){const a=t,p=i(null),u=i(new Date),v=i([]),m=["日","一","二","三","四","五","六"],g=["1月","2月","3月","4月","5月","6月","7月","8月","9月","10月","11月","12月"],x=e=>e.date.toDateString()===u.value.toDateString(),h=e=>{const t=new Date;return e.date.toDateString()===t.toDateString()};return n(()=>{(()=>{const e=[],t=new Date;for(let a=-15;a<=15;a++){const n=new Date(t);n.setDate(t.getDate()+a),e.push({date:new Date(n),day:n.getDate(),month:g[n.getMonth()],weekday:m[n.getDay()],timestamp:n.getTime()})}v.value=e})(),setTimeout(()=>{if(p.value){const e=p.value.querySelector(".selected");e&&e.scrollIntoView({behavior:"smooth",inline:"center",block:"nearest"})}},100)}),(e,t)=>(s(),o("div",Z,[d("div",{class:"dates-container",ref_key:"datesContainer",ref:p},[(s(!0),o(l,null,r(v.value,e=>(s(),o("div",{key:e.timestamp,class:c(["date-item",{selected:x(e),today:h(e)}]),onClick:t=>(e=>{u.value=new Date(e.date),a("selectedDate",Q(u.value).format("YYYY/MM/DD"))})(e)},[d("div",te,f(e.weekday),1),d("div",ae,f(e.day),1),d("div",ne,f(e.month),1)],10,ee))),128))],512)]))}}),[["__scopeId","data-v-7ef44356"]]),oe={class:"ion-display-flex ion-justify-content-between ion-align-items-center"},de={class:"ion-display-flex ion-align-items-center ion-padding-horizontal"},le=["src"],re={class:"card-wrapper"},se={class:"ion-display-flex ion-align-items-center"},ce={class:"ion-display-flex ion-justify-content-between ion-align-items-center"},fe={class:"ion-display-flex ion-justify-content-end"},pe={key:1,class:"ion-display-flex ion-flex-column ion-justify-content-center ion-align-items-center no_data"};e("default",p(a({__name:"HomePage",setup(e){const t=G(),a=u(),n=i([]),l=i(null),r=async e=>{const t=Q(e).format("YYYY-MM-DD"),i=a.uid;if(i)try{const e=await b(k(w,"todoList",i,t));e.empty?n.value=[]:n.value=e.docs.map(e=>({id:e.data().id,date:e.data().date,time:e.data().time,content:e.data().content,check:e.data().check}))}catch(o){m(o,"danger")}else m("請先登入","danger")};return v(async()=>{const e=await new Promise(e=>{const t=_(K,a=>{t(),e(a)})});l.value={uid:null==e?void 0:e.uid,email:null==e?void 0:e.email,displayName:null==e?void 0:e.displayName,photoURL:null==e?void 0:e.photoURL},a.saveUserInfo(l.value),e?r(Q(new Date).format("YYYY-MM-DD")):m("使用者未登入","danger")}),(e,i)=>(s(),g(h(y),null,{default:x(()=>[D(h(I),{class:"ion-no-border"},{default:x(()=>{var e;return[D(h(z),{class:"ion-toolbar"},{default:x(()=>[d("div",oe,[D(h(C),{slot:"start"},{default:x(()=>[D(h(j),{class:"ion-padding-horizontal"},{default:x(()=>[...i[0]||(i[0]=[S("TODOLIST",-1)])]),_:1})]),_:1}),d("div",de,[D(h(C),{slot:"end",class:"icon_area"},{default:x(()=>{var e;return[null!==(e=l.value)&&void 0!==e&&e.uid?(s(),g(h(T),{key:1},{default:x(()=>{var e;return[d("img",{class:"user-photo",src:null===(e=l.value)||void 0===e?void 0:e.photoURL,alt:"用戶頭像",referrerpolicy:"no-referrer"},null,8,le)]}),_:1})):(s(),g(h(L),{key:0,class:"icon_area_img","aria-hidden":"true",size:"large",icon:h(M)},null,8,["icon"]))]}),_:1})])])]),_:1}),null!==(e=l.value)&&void 0!==e&&e.uid?(s(),g(ie,{key:0,onSelectedDate:r})):Y("",!0)]}),_:1}),D(h(V),{fullscreen:!0,class:"page-content"},{default:x(()=>[n.value.length?(s(),g(h(W),{key:0,class:"scroller",items:n.value,"min-item-size":200},{default:x(({item:e,index:n,active:i})=>[D(h(X),{item:e,active:i,"size-dependencies":[e.content],"data-index":n},{default:x(()=>[d("div",re,[D(h(U),{class:"ion-padding"},{default:x(()=>[D(h(P),{class:"ion-no-padding ion-padding-vertical"},{default:x(()=>[d("div",se,[D(h(R),null,{default:x(()=>[S(f(e.content),1)]),_:2},1024),e.check?(s(),g(h(L),{key:0,class:"pl-2",color:"primary",icon:h(N)},null,8,["icon"])):Y("",!0)])]),_:2},1024),D(h(O),{class:"ion-no-padding"},{default:x(()=>[d("div",ce,[d("div",null,[D(h($),null,{default:x(()=>[S(f(e.date)+" "+f(e.time),1)]),_:2},1024)]),d("div",fe,[e.check?Y("",!0):(s(),g(h(L),{key:0,color:"primary",icon:h(q),onClick:a=>{return n=e.date,i=e.id,void t.push({name:"editTodo",params:{id:i},query:{date:n}});var n,i}},null,8,["icon","onClick"])),e.check?Y("",!0):(s(),g(h(L),{key:1,color:"success",icon:h(E),onClick:t=>(async e=>{const t=a.uid;if(!t)return void m("請先登入","danger");const n=B(w,"todoList",t,e.date,e.id);try{await J(n,{check:!0}),m("更新成功","success")}catch(i){m(i,"danger")}r(e.date)})(e)},null,8,["icon","onClick"])),D(h(L),{color:"danger",icon:h(F),onClick:t=>(async e=>{const t=a.uid;if(t){try{await A(B(w,"todoList",t,e.date,e.id)),m("刪除成功","success")}catch(n){m(n,"danger")}r(e.date)}else m("請先登入","danger")})(e)},null,8,["icon","onClick"])])])]),_:2},1024)]),_:2},1024)])]),_:2},1032,["item","active","size-dependencies","data-index"])]),_:1},8,["items"])):(s(),o("div",pe,[D(h(L),{icon:h(H),class:"empty_status"},null,8,["icon"]),i[1]||(i[1]=d("div",{class:"empty_title"},"目前尚無資料...",-1))]))]),_:1})]),_:1}))}}),[["__scopeId","data-v-df9e4f18"]]))}}});
