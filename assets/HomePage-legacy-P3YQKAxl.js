System.register(["./index-legacy-D_NWB0j9.js","./dayjs.min-legacy-B_dXnH5K.js","./vue-virtual-scroller.esm-legacy-0HboIC9l.js"],function(e,t){"use strict";var a,n,o,i,d,s,c,l,r,u,p,v,f,m,g,x,h,y,b,w,k,_,D,z,Y,C,j,L,S,T,I,M,U,P,R,N,O,$,q,E,F,H,V,A,B,G,J,K,Q,W,X,Z,ee;return{setters:[e=>{a=e.d,n=e.x,o=e.r,i=e.m,d=e.e,s=e.F,c=e.y,l=e.k,r=e.z,u=e.t,p=e._,v=e.u,f=e.A,m=e.o,g=e.c,x=e.w,h=e.a,y=e.I,b=e.B,w=e.C,k=e.D,_=e.E,D=e.G,z=e.H,Y=e.b,C=e.J,j=e.K,L=e.L,S=e.M,T=e.p,I=e.f,M=e.N,U=e.O,P=e.P,R=e.Q,N=e.R,O=e.S,$=e.T,q=e.U,E=e.V,F=e.W,H=e.X,V=e.Y,A=e.Z,B=e.g,G=e.$,J=e.a0,K=e.j,Q=e.a1,W=e.h},e=>{X=e.d},e=>{Z=e.s,ee=e.a}],execute:function(){var t=document.createElement("style");t.textContent='@charset "UTF-8";.date-picker-container[data-v-c82963e0]{background:#fff;border-radius:20px;padding:30px 20px;box-shadow:0 20px 60px rgba(0,0,0,.3)}.header[data-v-c82963e0]{text-align:center;margin-bottom:30px}.header h2[data-v-c82963e0]{color:#333;font-size:24px;margin-bottom:10px}.selected-date[data-v-c82963e0]{color:#667eea;font-size:18px;font-weight:500}.picker-wrapper[data-v-c82963e0]{background:#f5ebe0;position:relative;overflow:hidden;padding:8px 6px}.nav-button[data-v-c82963e0]{position:absolute;top:50%;transform:translateY(-50%);width:40px;height:40px;border:none;background:#667eea;color:#fff;border-radius:50%;cursor:pointer;display:flex;align-items:center;justify-content:center;font-size:20px;transition:all .3s;z-index:10;box-shadow:0 4px 12px rgba(102,126,234,.3)}.nav-button[data-v-c82963e0]:hover{background:#764ba2;transform:translateY(-50%) scale(1.1)}.nav-button[data-v-c82963e0]:active{transform:translateY(-50%) scale(.95)}.nav-button.prev[data-v-c82963e0]{left:5px}.nav-button.next[data-v-c82963e0]{right:5px}.dates-container[data-v-c82963e0]{display:flex;gap:12px;overflow-x:auto;scroll-behavior:smooth;scrollbar-width:none;-ms-overflow-style:none;padding:10px 0}.dates-container[data-v-c82963e0]::-webkit-scrollbar{display:none}.date-item[data-v-c82963e0]{color:#333;min-width:70px;height:90px;display:flex;flex-direction:column;align-items:center;justify-content:center;border:2px solid #e0e0e0;border-radius:12px;cursor:pointer;transition:all .3s;background:#fff;flex-shrink:0}.date-item[data-v-c82963e0]:hover{border-color:#667eea;transform:translateY(-5px);box-shadow:0 8px 16px rgba(102,126,234,.2)}.date-item.selected[data-v-c82963e0]{background:linear-gradient(135deg,#667eea,#764ba2);border-color:#667eea;color:#fff;transform:translateY(-5px);box-shadow:0 8px 20px rgba(102,126,234,.4)}.date-item.today[data-v-c82963e0]{border-color:#ffa726;border-width:3px}.weekday[data-v-c82963e0]{font-size:12px;font-weight:500;margin-bottom:5px;opacity:.8}.day[data-v-c82963e0]{font-size:24px;font-weight:700;margin-bottom:3px}.month[data-v-c82963e0]{font-size:11px;opacity:.7}.date-item.selected .weekday[data-v-c82963e0],.date-item.selected .month[data-v-c82963e0]{opacity:1}.icon_area[data-v-dd3f6fa5]{width:48px;height:48px}.icon_area_img[data-v-dd3f6fa5]{padding:8px}.no_data[data-v-dd3f6fa5]{height:100%}.empty_status[data-v-dd3f6fa5]{width:250px;height:250px;margin:0 auto;color:#d7d7d7}.empty_title[data-v-dd3f6fa5]{font-size:24px;text-align:center}.card-wrapper[data-v-dd3f6fa5]{padding:2px 0}ion-avatar[data-v-dd3f6fa5]{width:48px;height:48px}.user-photo[data-v-dd3f6fa5]{width:48px;height:48px;display:block;margin:0 auto}\n/*$vite$:1*/',document.head.appendChild(t);const te={class:"picker-wrapper"},ae=["onClick"],ne={class:"weekday"},oe={class:"day"},ie={class:"month"},de=p(a({__name:"DatePicker",emits:["selectedDate"],setup(e,{emit:t}){const a=t,p=o(null),v=o(new Date),f=o([]),m=["日","一","二","三","四","五","六"],g=["1月","2月","3月","4月","5月","6月","7月","8月","9月","10月","11月","12月"],x=e=>e.date.toDateString()===v.value.toDateString(),h=e=>{const t=new Date;return e.date.toDateString()===t.toDateString()};return n(()=>{(()=>{const e=[],t=new Date;for(let a=-15;a<=15;a++){const n=new Date(t);n.setDate(t.getDate()+a),e.push({date:new Date(n),day:n.getDate(),month:g[n.getMonth()],weekday:m[n.getDay()],timestamp:n.getTime()})}f.value=e})(),setTimeout(()=>{if(p.value){const e=p.value.querySelector(".selected");e&&e.scrollIntoView({behavior:"smooth",inline:"center",block:"nearest"})}},100)}),(e,t)=>(l(),i("div",te,[d("div",{class:"dates-container",ref_key:"datesContainer",ref:p},[(l(!0),i(s,null,c(f.value,e=>(l(),i("div",{key:e.timestamp,class:r(["date-item",{selected:x(e),today:h(e)}]),onClick:t=>(e=>{v.value=new Date(e.date),a("selectedDate",X(v.value).format("YYYY-MM-DD"))})(e)},[d("div",ne,u(e.weekday),1),d("div",oe,u(e.day),1),d("div",ie,u(e.month),1)],10,ae))),128))],512)]))}}),[["__scopeId","data-v-c82963e0"]]),se={class:"ion-display-flex ion-justify-content-between ion-align-items-center"},ce={class:"ion-display-flex ion-align-items-center ion-padding-horizontal"},le=["src"],re={class:"card-wrapper"},ue={class:"ion-display-flex ion-align-items-center"},pe={class:"ion-display-flex ion-justify-content-between ion-align-items-center"},ve={class:"ion-display-flex ion-justify-content-end"},fe={key:1,class:"ion-display-flex ion-flex-column ion-justify-content-center ion-align-items-center no_data"};e("default",p(a({__name:"HomePage",setup(e){const t=K(),a=v(),n=o([]),s=o(null),c=async()=>{const e=a.uid;if(e)try{const t=await b(w(k,"todoList",e,"todos"));t.empty?n.value=[]:n.value=t.docs.map(e=>({id:e.data().id,date:e.data().date,time:e.data().time,content:e.data().content,check:e.data().check}))}catch(t){m(t,"danger")}else m("請先登入","danger")},r=async e=>{const t=a.uid;if(!t)return void m("請先登入","danger");const o=D(w(k,"todoList",t,"todos"),z("date","==",e)),i=await b(o);n.value=i.docs.map(e=>({...e.data()}))};return f(async()=>{const e=await new Promise(e=>{const t=_(W,a=>{t(),e(a)})});s.value={uid:null==e?void 0:e.uid,email:null==e?void 0:e.email,displayName:null==e?void 0:e.displayName,photoURL:null==e?void 0:e.photoURL},a.saveUserInfo(s.value),e?(c(),r(X(new Date).format("YYYY-MM-DD"))):m("使用者未登入","danger")}),(e,o)=>(l(),g(h(y),null,{default:x(()=>[Y(h(P),{class:"ion-no-border"},{default:x(()=>{var e;return[Y(h(j),{class:"ion-toolbar"},{default:x(()=>[d("div",se,[Y(h(L),{slot:"start"},{default:x(()=>[Y(h(S),{class:"ion-padding-horizontal"},{default:x(()=>[...o[0]||(o[0]=[T("TODOLIST",-1)])]),_:1})]),_:1}),d("div",ce,[Y(h(L),{slot:"end",class:"icon_area"},{default:x(()=>{var e;return[null!==(e=s.value)&&void 0!==e&&e.uid?(l(),g(h(U),{key:1},{default:x(()=>{var e;return[d("img",{class:"user-photo",src:null===(e=s.value)||void 0===e?void 0:e.photoURL,alt:"用戶頭像",referrerpolicy:"no-referrer"},null,8,le)]}),_:1})):(l(),g(h(I),{key:0,class:"icon_area_img","aria-hidden":"true",size:"large",icon:h(M)},null,8,["icon"]))]}),_:1})])])]),_:1}),null!==(e=s.value)&&void 0!==e&&e.uid?(l(),g(de,{key:0,onSelectedDate:r})):C("",!0)]}),_:1}),Y(h(B),{fullscreen:!0,class:"page-content"},{default:x(()=>[n.value.length?(l(),g(h(Z),{key:0,class:"scroller",items:n.value,"min-item-size":200},{default:x(({item:e,index:n,active:o})=>[Y(h(ee),{item:e,active:o,"size-dependencies":[e.content],"data-index":n},{default:x(()=>[d("div",re,[Y(h(R),{class:"ion-padding"},{default:x(()=>[Y(h(N),{class:"ion-no-padding ion-padding-vertical"},{default:x(()=>[d("div",ue,[Y(h(O),null,{default:x(()=>[T(u(e.content),1)]),_:2},1024),e.check?(l(),g(h(I),{key:0,class:"pl-2",color:"primary",icon:h($)},null,8,["icon"])):C("",!0)])]),_:2},1024),Y(h(q),{class:"ion-no-padding"},{default:x(()=>[d("div",pe,[d("div",null,[Y(h(E),null,{default:x(()=>[T(u(e.date)+" "+u(e.time),1)]),_:2},1024)]),d("div",ve,[e.check?C("",!0):(l(),g(h(I),{key:0,color:"primary",icon:h(F),onClick:a=>{return n=e.date,o=e.id,void t.push({name:"editTodo",params:{id:o},query:{date:n}});var n,o}},null,8,["icon","onClick"])),e.check?C("",!0):(l(),g(h(I),{key:1,color:"success",icon:h(H),onClick:t=>(async e=>{const t=a.uid;if(!t)return void m("請先登入","danger");const n=D(w(k,"todoList",t,"todos"),z("id","==",e.id));try{const e=await b(n),a=J(k,"todoList",t,"todos",e.docs[0].id);await Q(a,{check:!0}),m("更新成功","success")}catch(o){m(o,"danger")}c()})(e)},null,8,["icon","onClick"])),Y(h(I),{color:"danger",icon:h(V),onClick:t=>(async e=>{const t=a.uid;if(!t)return void m("請先登入","danger");const n=D(w(k,"todoList",t,"todos"),z("id","==",e.id));try{const e=await b(n);await G(J(k,"todoList",t,"todos",e.docs[0].id)),m("刪除成功","success")}catch(o){m(o,"danger")}c()})(e)},null,8,["icon","onClick"])])])]),_:2},1024)]),_:2},1024)])]),_:2},1032,["item","active","size-dependencies","data-index"])]),_:1},8,["items"])):(l(),i("div",fe,[Y(h(I),{icon:h(A),class:"empty_status"},null,8,["icon"]),o[1]||(o[1]=d("div",{class:"empty_title"},"目前尚無資料...",-1))]))]),_:1})]),_:1}))}}),[["__scopeId","data-v-dd3f6fa5"]]))}}});
