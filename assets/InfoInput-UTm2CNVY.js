import{d as S,a3 as N,m as U,e as d,b as n,a as s,a4 as p,r,a5 as g,w as v,g as D,a6 as T,H as E,J as $,a7 as j,p as q,t as J,q as z,k as A,_ as F}from"./index-TM_tSvUV.js";import{d as o}from"./dayjs.min-CxMP4GVf.js";const G={class:"ion-padding"},K={class:"ion-margin-bottom"},L={class:"ion-margin-top"},P={class:"ion-margin-bottom"},Q={class:"ion-margin-top"},R={class:"ion-margin-bottom"},W=S({__name:"InfoInput",props:{editTodo:{}},emits:["addTodo","updateTodo"],setup(M,{emit:b}){const _=M,I=b,l=r(""),i=r(""),f=r(!1),c=r(!1),t=r({id:"",date:"",time:"",content:"",check:!1}),u=z(()=>{var a;return((a=_.editTodo)==null?void 0:a.id)!==""});N(()=>_.editTodo,a=>{if(u.value&&(t.value={id:a==null?void 0:a.id,date:a.date,time:a.time,content:a.content,check:a.check,iso8601:a.iso8601},a.date&&(l.value=o(a.date).format()),a.time)){const e="".concat(a.date," ").concat(a.time);i.value=o(e).format()}},{deep:!0,immediate:!0});const k=()=>{u.value?l.value=o(l.value).format():l.value=o(new Date).format(),t.value.iso8601=l.value,t.value.date=o(l.value).format("YYYY-MM-DD"),f.value=!0},h=()=>{f.value=!1,u.value?l.value=o(l.value).format():l.value=o(new Date).format()},C=()=>{u.value?i.value=o(i.value).format():i.value=o(new Date).format(),t.value.iso8601=i.value,t.value.time=o(i.value).format("HH:mm"),c.value=!0},Y=()=>{c.value=!1,u.value?i.value=o(i.value).format():i.value=o(new Date).format()},y=a=>{const e=a.detail.value;e&&(l.value=o(e).format(),t.value.iso8601=l.value,t.value.date=o(e).format("YYYY-MM-DD"))},x=a=>{const e=a.detail.value;e&&(i.value=o(e).format(),t.value.iso8601=i.value,t.value.time=o(e).format("HH:mm"))},B=()=>{I("addTodo",t.value),t.value={id:"",date:"",time:"",content:"",check:!1}},H=()=>{I("updateTodo",t.value)},O=()=>{u.value?H():B()};return(a,e)=>(A(),U("div",G,[d("div",K,[e[3]||(e[3]=d("div",{class:"input_title"},"日期",-1)),n(s(p),{value:t.value.date,"onUpdate:modelValue":e[0]||(e[0]=m=>t.value.date=m),"label-placement":"floating",fill:"outline",readonly:"",onClick:k},null,8,["value"]),n(s(g),{"is-open":f.value,"initial-breakpoint":.5,"handle-behavior":"cycle",onIonModalDidDismiss:h},{default:v(()=>[n(s(D),{class:"ion-padding"},{default:v(()=>[d("div",L,[n(s(T),{presentation:"date",value:l.value,onIonChange:y},null,8,["value"])])]),_:1})]),_:1},8,["is-open"])]),d("div",P,[e[4]||(e[4]=d("div",{class:"input_title"},"時間",-1)),n(s(p),{value:t.value.time,"onUpdate:modelValue":e[1]||(e[1]=m=>t.value.time=m),"label-placement":"floating",fill:"outline",readonly:"",onClick:C},null,8,["value"]),n(s(g),{"is-open":c.value,"initial-breakpoint":.3,"handle-behavior":"cycle",onIonModalDidDismiss:Y},{default:v(()=>[n(s(D),{class:"ion-padding"},{default:v(()=>[d("div",Q,[n(s(T),{presentation:"time",value:i.value,onIonChange:x},null,8,["value"])])]),_:1})]),_:1},8,["is-open"])]),d("div",R,[e[5]||(e[5]=d("div",{class:"input_title"},"內容",-1)),n(s(p),{value:t.value.content,"onUpdate:modelValue":e[2]||(e[2]=m=>t.value.content=m),"label-placement":"floating",fill:"outline"},null,8,["value"])]),n(s(E),{class:"info-toolbar"},{default:v(()=>[n(s($),{slot:"primary"},{default:v(()=>[n(s(j),{fill:"solid",onClick:O},{default:v(()=>[q(J(u.value?"更新":"新增"),1)]),_:1})]),_:1})]),_:1})]))}}),w=F(W,[["__scopeId","data-v-3fa0441f"]]);export{w as I};
