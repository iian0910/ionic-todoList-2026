import{d as E,u as L,A as R,r as T,c as p,w as a,a as e,I as A,o as r,B as H,C as K,D as h,b as t,H as U,J as D,f as d,a0 as q,K as F,p as v,N as G,m as J,e as u,n as f,G as x,t as C,R as P,U as X,V as Y,W as Z,X as M,g as Q,Y as ee,Z as b,j as ne,$ as te,k as _,_ as ae}from"./index-TM_tSvUV.js";import{s as oe,a as se}from"./vue-virtual-scroller.esm-B2zRwTCa.js";const ce={class:"card-wrapper"},le={class:"ion-display-flex ion-align-items-center"},ie={class:"ion-display-flex ion-justify-content-between ion-align-items-center"},re={class:"ion-display-flex ion-justify-content-end"},de={key:1,class:"ion-display-flex ion-flex-column ion-justify-content-center ion-align-items-center no_data"},ue=E({__name:"WeeklyTodo",setup(_e){const m=L(),w=ne(),k=T([]),y=T([]),N=o=>Array.from({length:7},(n,c)=>{const l=new Date(o);return l.setDate(l.getDate()+c),l.toISOString().slice(0,10)}),g=async o=>{const n=m.uid;if(!n){r("請先登入","danger");return}for(const c of o)(await H(K(h,"todoList",n,c))).forEach(i=>{y.value.push({id:i.data().id,date:i.data().date,time:i.data().time,content:i.data().content,check:i.data().check})});console.log("result =>",y.value)},B=async o=>{const n=m.uid;if(!n){r("請先登入","danger");return}try{await ee(b(h,"todoList",n,o.date,o.id)),r("刪除成功","success")}catch(c){r(c,"danger")}g(k.value)},O=(o,n)=>{w.push({name:"editTodo",params:{id:n},query:{date:o}})},V=async o=>{const n=m.uid;if(!n){r("請先登入","danger");return}const c=b(h,"todoList",n,o.date,o.id);try{await te(c,{check:!0}),r("更新成功","success")}catch(l){r(l,"danger")}g(k.value)},W=()=>{w.push({name:"home"})};return R(()=>{k.value=N(new Date),g(k.value)}),(o,n)=>{const c=f("ion-card-title"),l=f("ion-card-header"),i=f("ion-text"),$=f("ion-card-content"),j=f("ion-card");return _(),p(e(A),null,{default:a(()=>[t(e(G),{class:"ion-no-border"},{default:a(()=>[t(e(U),{class:"ion-toolbar"},{default:a(()=>[t(e(D),{slot:"start",class:"icon_area",onClick:W},{default:a(()=>[t(e(d),{class:"icon_area_img","aria-hidden":"true",size:"large",icon:e(q)},null,8,["icon"])]),_:1}),t(e(F),{class:"page_title"},{default:a(()=>[...n[0]||(n[0]=[v("一周計畫",-1)])]),_:1}),t(e(D),{slot:"end",class:"icon_area"})]),_:1})]),_:1}),t(e(Q),{fullscreen:!0,class:"page-content"},{default:a(()=>[y.value.length?(_(),p(e(oe),{key:0,class:"scroller",items:y.value,"min-item-size":200},{default:a(({item:s,index:z,active:S})=>[t(e(se),{item:s,active:S,"size-dependencies":[s.content],"data-index":z},{default:a(()=>[u("div",ce,[t(j,{class:"ion-padding"},{default:a(()=>[t(l,{class:"ion-no-padding ion-padding-vertical"},{default:a(()=>[u("div",le,[t(c,null,{default:a(()=>[v(C(s.content),1)]),_:2},1024),s.check?(_(),p(e(d),{key:0,class:"pl-2",color:"primary",icon:e(P)},null,8,["icon"])):x("",!0)])]),_:2},1024),t($,{class:"ion-no-padding"},{default:a(()=>[u("div",ie,[u("div",null,[t(i,null,{default:a(()=>[v(C(s.date)+" "+C(s.time),1)]),_:2},1024)]),u("div",re,[s.check?x("",!0):(_(),p(e(d),{key:0,color:"primary",icon:e(X),onClick:I=>O(s.date,s.id)},null,8,["icon","onClick"])),s.check?x("",!0):(_(),p(e(d),{key:1,color:"success",icon:e(Y),onClick:I=>V(s)},null,8,["icon","onClick"])),t(e(d),{color:"danger",icon:e(Z),onClick:I=>B(s)},null,8,["icon","onClick"])])])]),_:2},1024)]),_:2},1024)])]),_:2},1032,["item","active","size-dependencies","data-index"])]),_:1},8,["items"])):(_(),J("div",de,[t(e(d),{icon:e(M),class:"empty_status"},null,8,["icon"]),n[1]||(n[1]=u("div",{class:"empty_title"},"目前尚無資料...",-1))]))]),_:1})]),_:1})}}}),ke=ae(ue,[["__scopeId","data-v-9b2d114b"]]);export{ke as default};
