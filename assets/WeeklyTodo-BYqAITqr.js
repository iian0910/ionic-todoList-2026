import{d as S,u as E,A,r as I,c as p,w as a,a as e,I as K,o as r,B as P,C as R,D as h,b as t,K as q,L as D,f as d,a2 as F,M as H,p as v,P as J,m as M,e as u,n as f,J as x,t as C,T as U,W as X,X as Y,Y as Z,Z as G,g as Q,$ as ee,a0 as b,j as ne,a1 as te,k as _,_ as ae}from"./index-Dq5IbgG3.js";import{s as oe,a as se}from"./vue-virtual-scroller.esm-ypv9sbEd.js";const ce={class:"card-wrapper"},le={class:"ion-display-flex ion-align-items-center"},ie={class:"ion-display-flex ion-justify-content-between ion-align-items-center"},re={class:"ion-display-flex ion-justify-content-end"},de={key:1,class:"ion-display-flex ion-flex-column ion-justify-content-center ion-align-items-center no_data"},ue=S({__name:"WeeklyTodo",setup(_e){const m=E(),w=ne(),k=I([]),y=I([]),B=o=>Array.from({length:7},(n,c)=>{const l=new Date(o);return l.setDate(l.getDate()+c),l.toISOString().slice(0,10)}),g=async o=>{const n=m.uid;if(!n){r("請先登入","danger");return}for(const c of o)(await P(R(h,"todoList",n,c))).forEach(i=>{y.value.push({id:i.data().id,date:i.data().date,time:i.data().time,content:i.data().content,check:i.data().check})});console.log("result =>",y.value)},N=async o=>{const n=m.uid;if(!n){r("請先登入","danger");return}try{await ee(b(h,"todoList",n,o.date,o.id)),r("刪除成功","success")}catch(c){r(c,"danger")}g(k.value)},O=(o,n)=>{w.push({name:"editTodo",params:{id:n},query:{date:o}})},W=async o=>{const n=m.uid;if(!n){r("請先登入","danger");return}const c=b(h,"todoList",n,o.date,o.id);try{await te(c,{check:!0}),r("更新成功","success")}catch(l){r(l,"danger")}g(k.value)},V=()=>{w.push({name:"home"})};return A(()=>{k.value=B(new Date),g(k.value)}),(o,n)=>{const c=f("ion-card-title"),l=f("ion-card-header"),i=f("ion-text"),$=f("ion-card-content"),j=f("ion-card");return _(),p(e(K),null,{default:a(()=>[t(e(J),{class:"ion-no-border"},{default:a(()=>[t(e(q),{class:"ion-toolbar"},{default:a(()=>[t(e(D),{slot:"start",class:"icon_area",onClick:V},{default:a(()=>[t(e(d),{class:"icon_area_img","aria-hidden":"true",size:"large",icon:e(F)},null,8,["icon"])]),_:1}),t(e(H),{class:"page_title"},{default:a(()=>[...n[0]||(n[0]=[v("一周計畫",-1)])]),_:1}),t(e(D),{slot:"end",class:"icon_area"})]),_:1})]),_:1}),t(e(Q),{fullscreen:!0,class:"page-content"},{default:a(()=>[y.value.length?(_(),p(e(oe),{key:0,class:"scroller",items:y.value,"min-item-size":200},{default:a(({item:s,index:z,active:L})=>[t(e(se),{item:s,active:L,"size-dependencies":[s.content],"data-index":z},{default:a(()=>[u("div",ce,[t(j,{class:"ion-padding"},{default:a(()=>[t(l,{class:"ion-no-padding ion-padding-vertical"},{default:a(()=>[u("div",le,[t(c,null,{default:a(()=>[v(C(s.content),1)]),_:2},1024),s.check?(_(),p(e(d),{key:0,class:"pl-2",color:"primary",icon:e(U)},null,8,["icon"])):x("",!0)])]),_:2},1024),t($,{class:"ion-no-padding"},{default:a(()=>[u("div",ie,[u("div",null,[t(i,null,{default:a(()=>[v(C(s.date)+" "+C(s.time),1)]),_:2},1024)]),u("div",re,[s.check?x("",!0):(_(),p(e(d),{key:0,color:"primary",icon:e(X),onClick:T=>O(s.date,s.id)},null,8,["icon","onClick"])),s.check?x("",!0):(_(),p(e(d),{key:1,color:"success",icon:e(Y),onClick:T=>W(s)},null,8,["icon","onClick"])),t(e(d),{color:"danger",icon:e(Z),onClick:T=>N(s)},null,8,["icon","onClick"])])])]),_:2},1024)]),_:2},1024)])]),_:2},1032,["item","active","size-dependencies","data-index"])]),_:1},8,["items"])):(_(),M("div",de,[t(e(d),{icon:e(G),class:"empty_status"},null,8,["icon"]),n[1]||(n[1]=u("div",{class:"empty_title"},"目前尚無資料...",-1))]))]),_:1})]),_:1})}}}),ke=ae(ue,[["__scopeId","data-v-9b2d114b"]]);export{ke as default};
